/* ===== 全域變數 ===== */
:root {
  --card: #ffffff;
  --bg: #f6f7fb;
  --line: #e7ebf3;
  --text: #1f2430;
  --sub: #7a8599;
  --blue: #276ef1;
}

/* =========================================================
   A. b-* 版面與側欄（可選側欄/市集等頁共用）
   ========================================================= */
.b-container {
  max-width: 1080px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 1rem;
}
.b-main { min-width: 0; }
.b-main.only { grid-column: 1 / -1; }

.b-sidebar {
  position: sticky;
  top: 80px;
  align-self: start;
  padding: .75rem;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 14px;
}
.b-sidebar-title { font-weight: 700; margin-bottom: .4rem; }
.b-sidebar-link {
  display: block; padding: .45rem .5rem; border-radius: 8px;
  color: var(--text); text-decoration: none;
}
.b-sidebar-link:hover { background: #f1f4fb; }
.b-sidebar-link.active { background: #e9f0ff; color: var(--blue); font-weight: 700; }

/* 單欄（沒有側欄的頁） */
.b-container.no-side { max-width: 980px; grid-template-columns: 1fr; }

/* 小工具列 */
.b-toolbar {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: .6rem;
}
.b-post-btn {
  text-decoration: none;
  padding: .55rem .9rem;
  background: var(--blue); color: #fff;
  border-radius: 10px; font-weight: 700;
}

.b-empty { color: var(--sub); padding: 1rem 0; }
.b-list { display: grid; gap: .8rem; }

.b-card {
  display: block; text-decoration: none; color: inherit;
  background: var(--card);
  border: 1px solid var(--line); border-radius: 14px;
  padding: .9rem 1rem;
}
.b-card:hover { border-color: #cfd7eb; box-shadow: 0 4px 18px rgba(0,0,0,.04); }

.b-card-header { display: flex; justify-content: space-between; align-items: center; }
.b-author { display: flex; align-items: center; gap: .4rem; color: var(--sub); }
.b-avatar { font-size: 1.15rem; }
.b-name { color: var(--text); font-weight: 600; }
.b-dot { color: #c1c8d6; padding: 0 .15rem; }
.b-time { color: var(--sub); font-size: .9rem; }

.b-card-title { font-size: 1.08rem; font-weight: 700; margin-top: .2rem; }
.b-card-snippet { color: var(--text); margin-top: .25rem; }
.b-card-meta { color: var(--sub); font-size: .9rem; margin-top: .4rem; }

.b-editor { max-width: 800px; margin: 0 auto; }
.b-editor-form { display: grid; gap: .6rem; }
.b-input, .b-textarea {
  width: 100%; border: 1px solid var(--line); border-radius: 12px;
  padding: .75rem .85rem; font-size: 1rem; background: #fff;
}
.b-textarea { min-height: 220px; }
.b-check { font-size: .92rem; color: var(--sub); display: inline-flex; gap: .4rem; align-items: center; }
.b-actions { display: flex; gap: .6rem; }
.b-primary { background: var(--blue); color: #fff; padding: .6rem .9rem; border-radius: 10px; font-weight: 700; border: none; }
.b-ghost { background: #fff; color: var(--text); padding: .6rem .9rem; border-radius: 10px; border: 1px solid var(--line); }

.b-detail-card {
  background: var(--card); border: 1px solid var(--line); border-radius: 14px;
  padding: 1rem 1.1rem; margin-bottom: .8rem;
}
.b-detail-title { font-size: 1.25rem; font-weight: 800; margin-top: .35rem; }
.b-detail-content { white-space: pre-wrap; color: var(--text); margin-top: .5rem; }

.b-section-title { margin: .6rem 0; }
.b-comments { display: grid; gap: .6rem; }
.b-comment {
  background: var(--card); border: 1px solid var(--line); border-radius: 14px;
  padding: .7rem .9rem;
}
.b-comment-content { margin-top: .3rem; white-space: pre-wrap; }

/* =========================================================
   B. board-* 討論板（清單 / 發文 / 詳文 / 留言）
   ========================================================= */
.board-wrap{max-width:980px;margin:0 auto;padding:12px;}
.board-bar{display:flex;gap:.6rem;margin-bottom:.8rem;align-items:center}
.board-search{flex:1;border:1px solid #e6e9f2;border-radius:12px;padding:.6rem .8rem}

/* 共用按鈕 */
.btn-primary{background:#276ef1;color:#fff;border:none;border-radius:10px;padding:.55rem .9rem;font-weight:800;cursor:pointer}
.btn-ghost{background:#fff;border:1px solid #e6e9f2;border-radius:10px;padding:.55rem .9rem;cursor:pointer}
.btn-ghost.tiny{padding:.25rem .5rem;font-size:.9rem}
.btn-primary.tiny{padding:.25rem .45rem;font-size:.9rem}

/* 小輔助（留言工具列用） */
.spacer{flex:1}

.board-empty{color:#7a8599}
.board-list{display:grid;gap:.8rem}

.post-card{
  display:block;border:1px solid #e6e9f2;border-radius:14px;background:#fff;
  padding:.8rem 1rem;text-decoration:none;color:inherit
}
.post-card:hover{background:#fafbff}
.post-head{display:flex;justify-content:space-between;align-items:center}
.post-title{font-weight:800}
.post-time{color:#9aa3b2;font-size:.9rem}
.post-content{margin:.35rem 0;white-space:pre-wrap}

/* 列表縮圖（基礎） */
.post-thumb img{
  width:100%;max-height:300px;object-fit:cover;border-radius:12px;border:1px solid #eef1f7
}
.post-meta{display:flex;gap:1rem;color:#7a8599;margin-top:.4rem}

/* 發文卡片/表單 */
.editor-card,.detail-card{border:1px solid #e6e9f2;border-radius:14px;background:#fff;padding:1rem}
.editor-form .row{display:grid;gap:.35rem;margin-bottom:.7rem}
.editor-form input,.editor-form textarea{border:1px solid #e6e9f2;border-radius:12px;padding:.6rem .8rem}
.editor-preview img{max-width:100%;border-radius:12px;border:1px solid #eef1f7;margin-top:.4rem}
.editor-actions{display:flex;gap:.5rem}

/* 詳文（基礎） */
.detail-head{display:flex;justify-content:space-between;align-items:center}
.detail-title{font-weight:900;margin:.2rem 0}
.detail-time{color:#9aa3b2}
.detail-content{white-space:pre-wrap;margin:.5rem 0}
.detail-image img{
  width:100%;max-height:460px;object-fit:contain;border-radius:12px;border:1px solid #eef1f7;background:#fafafa
}

/* 反應（讚/愛心） */
.reactions{display:flex;align-items:center;gap:.4rem;margin:.4rem 0 .6rem}
.react-btn{border:1px solid #e6e9f2;background:#fff;border-radius:10px;padding:.25rem .55rem;cursor:pointer;font-size:1.05rem}
.react-btn.on{background:#ffeef2;border-color:#ffb6c1}
.react-gap{width:1rem}

/* 留言編輯器 */
.comment-editor{
  border:1px solid #eef1f7;border-radius:12px;padding:.6rem .8rem;background:#fff;margin-top:.3rem
}
.comment-editor textarea{width:100%;border:1px solid #e6e9f2;border-radius:10px;padding:.55rem .7rem}
.comment-tools{display:flex;align-items:center;gap:.6rem;margin-top:.4rem}
.comment-preview img{max-width:220px;border-radius:10px;border:1px solid #eef1f7;margin:.3rem 0}

/* 留言清單 */
.comment-list{display:grid;gap:.6rem;margin-top:1rem}
.comment-item{border:1px solid #eef1f7;border-radius:12px;padding:.55rem .7rem;background:#fff}
.comment-who{display:flex;align-items:center;gap:.45rem;color:#657089}
.comment-who .name{font-weight:700;color:#222}
.comment-who .time{color:#9aa3b2;font-size:.9rem}
.comment-text{white-space:pre-wrap;margin-top:.25rem}
.comment-image img{max-width:100%;border-radius:10px;border:1px solid #eef1f7;margin-top:.25rem}

.detail-foot{display:flex;justify-content:flex-end;margin-top:.8rem}

/* 相簿（列表卡片用）：Dcard 橫向縮圖列（基礎） */
.post-album{
  display:flex; gap:.4rem; overflow-x:auto; padding:.2rem 0;
  scroll-snap-type:x proximity;
}
.post-album img{
  width:140px; height:100px; object-fit:cover;
  border-radius:10px; border:1px solid #eef1f7; flex:none;
  scroll-snap-align:start;
}

/* 文章詳情相簿（基礎） */
.detail-album{
  display:flex; gap:.5rem; overflow-x:auto; margin:.4rem 0;
  scroll-snap-type:x proximity;
}
.detail-album img{
  height:260px; max-width:100%; object-fit:cover;
  border-radius:12px; border:1px solid #eef1f7; background:#fafafa;
  scroll-snap-align:start;
}

/* 滾動條小優化（可留可去） */
.post-album::-webkit-scrollbar,
.detail-album::-webkit-scrollbar { height: 6px }
.post-album::-webkit-scrollbar-thumb,
.detail-album::-webkit-scrollbar-thumb { background:#e6e9f2;border-radius:4px }

/* =========================================================
   C. 統一聊天板圖片尺寸（覆寫在最後，確保一致）
   ========================================================= */

/* 列表卡片：單張縮圖固定高度、滿版裁切 */
.post-thumb{ height: 200px; }
.post-thumb img{
  width: 100%; height: 100%;
  object-fit: cover;
  border-radius: 12px; border: 1px solid #eef1f7;
}

/* 列表卡片：多圖橫向相簿（每張 4:3、一樣大） */
.post-album{ gap:.5rem; padding:.25rem 0; }
.post-album img{
  width: 160px;               /* 可改 140/180 視覺需求 */
  aspect-ratio: 4 / 3;        /* 固定 4:3 比例 */
  height: auto;
  object-fit: cover;
  border-radius: 10px; border: 1px solid #eef1f7; flex: none;
}

/* 文章詳情：單張圖片 4:3 盒子，置中 */
.detail-image img{
  display:block;
  width: min(100%, 720px);
  aspect-ratio: 4 / 3;
  height: auto;
  object-fit: cover;
  margin: 0 auto;
  border-radius: 12px; border: 1px solid #eef1f7; background:#fafafa;
}

/* 文章詳情：多圖相簿（每張 4:3、一樣大） */
.detail-album{ gap:.6rem; margin:.4rem 0; }
.detail-album img{
  width: 480px;               /* 橫向滑動，每張固定寬度 */
  aspect-ratio: 4 / 3;
  height: auto;
  object-fit: cover;
  border-radius: 12px; border: 1px solid #eef1f7; background:#fafafa; flex:none;
}

/* 留言圖片／留言預覽：統一正方形縮圖 */
.comment-image img,
.comment-preview img{
  width: 220px;
  aspect-ratio: 1 / 1;        /* 正方形 */
  height: auto;
  object-fit: cover;
  border-radius: 10px; border: 1px solid #eef1f7; background:#fafafa;
}

/* 發文預覽（編輯器內）：同詳文單張規格 */
.editor-preview img{
  width: min(100%, 720px);
  aspect-ratio: 4 / 3;
  height: auto;
  object-fit: cover;
  border-radius: 12px; border: 1px solid #eef1f7; background:#fafafa;
}

/* RWD 微調：手機縮小尺寸 */
@media (max-width: 640px){
  .post-thumb{ height: 160px; }
  .post-album img{ width: 44vw; }     /* 列表相簿每張佔寬 ~44% */
  .detail-album img{ width: 76vw; }   /* 詳文相簿每張佔寬 ~76% */
  .comment-image img,
  .comment-preview img{ width: 42vw; }/* 手機留言圖較小 */
}
